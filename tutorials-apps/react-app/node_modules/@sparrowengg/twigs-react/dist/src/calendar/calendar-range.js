import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useRef } from 'react';
import { useRangeCalendarState } from 'react-stately';
import { useRangeCalendar, useLocale } from 'react-aria';
import { createCalendar } from '@internationalized/date';
import { ChevronLeftIcon, ChevronRightIcon } from '@sparrowengg/twigs-react-icons';
import { Box } from '../box';
import { CalendarNavigationButton, CalendarMonth } from './calendar-header';
import { Flex } from '../flex';
import { CalendarGrid } from './calendar-grid';
function getMonthName(monthIndex, timeZone) {
    const date = new Date();
    date.setMonth(monthIndex - 1);
    return date.toLocaleString('default', { month: 'long', timeZone });
}
export const CalendarRange = (props) => {
    const { locale } = useLocale();
    const state = useRangeCalendarState({
        ...props,
        visibleDuration: { months: 2 },
        locale,
        createCalendar
    });
    const ref = useRef(null);
    const { calendarProps, prevButtonProps, nextButtonProps } = useRangeCalendar(props, state, ref);
    const startMonth = getMonthName(state.visibleRange.start.month, state.timeZone);
    const endMonth = getMonthName(state.visibleRange.end.month, state.timeZone);
    return (_jsxs(Flex, { ...calendarProps, gap: "$26", ref: ref, children: [_jsxs(Box, { children: [_jsxs(Flex, { alignItems: "center", justifyContent: "space-between", css: {
                            marginBottom: '$12'
                        }, children: [_jsx(CalendarNavigationButton, { ...prevButtonProps, icon: _jsx(ChevronLeftIcon, {}) }), _jsx(CalendarMonth, { children: `${startMonth} ${state.visibleRange.start.year}` }), _jsx(Box, {})] }), _jsx(CalendarGrid, { state: state })] }), _jsxs(Box, { children: [_jsxs(Flex, { alignItems: "center", justifyContent: "space-between", css: {
                            marginBottom: '$12'
                        }, children: [_jsx(Box, {}), _jsx(CalendarMonth, { children: `${endMonth} ${state.visibleRange.end.year}` }), _jsx(CalendarNavigationButton, { ...nextButtonProps, icon: _jsx(ChevronRightIcon, {}) })] }), _jsx(CalendarGrid, { state: state, offset: { months: 1 } })] })] }));
};
